(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{38:function(t,e,s){},39:function(t,e,s){},64:function(t,e,s){"use strict";s.r(e);var n=s(1),a=s.n(n),r=s(19),o=s.n(r),c=(s(38),s(3)),i=s(4),l=s(6),u=s(5),p=(s(39),s(12)),j=s(8),h=s(7),d=s(0),b=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(d.jsxs)("section",{className:"home-section-container",children:[Object(d.jsx)("em",{className:"home-tagline",children:"Where good ideas find you"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:"Read and share new perspectives on just about any topic. Everyone\u2019s welcome."}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(p.b,{to:"/register",children:"Get Started"})]})}}]),s}(a.a.Component),m=s(9),O=s.n(m),f=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={email:"",username:"",password:"",confirmPassword:""},t.register=function(){if(0!==t.state.email.length&&0!==t.state.username.length&&0!==t.state.password.length&&0!==t.state.confirmPassword.length)return t.state.confirmPassword!==t.state.password?alert("Passwords doesn't match. Please type the same passwords"):void O.a.post("http://localhost:8080/register",t.state).then((function(e){alert("You've successfully registered. You can now sign in"),t.setState({email:"",username:"",password:"",confirmPassword:""})})).catch((function(t){alert("There's something wrong. The details you entered might already exist.")}));alert("Please enter valid credentials")},t}return Object(i.a)(s,[{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"reg-form-container",children:[Object(d.jsx)("h2",{children:"Get Started"}),Object(d.jsx)("p",{children:"Please fill in this form to create an account."}),Object(d.jsx)("hr",{}),"Email:"," ",Object(d.jsx)("input",{type:"email",value:this.state.email,onChange:function(e){t.setState({email:e.target.value})},name:"email",id:"email",required:!0}),"Username:"," ",Object(d.jsx)("input",{type:"text",value:this.state.username,onChange:function(e){t.setState({username:e.target.value})},name:"usn",id:"usn",required:!0}),Object(d.jsx)("br",{}),"Password:"," ",Object(d.jsx)("input",{type:"password",value:this.state.password,onChange:function(e){t.setState({password:e.target.value})},name:"psw",id:"psw",required:!0}),Object(d.jsx)("br",{}),"Confirm Password:"," ",Object(d.jsx)("input",{type:"password",value:this.state.confirmPassword,onChange:function(e){t.setState({confirmPassword:e.target.value})},name:"psw-repeat",id:"psw-repeat",required:!0}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{className:"registerbtn",onClick:this.register,children:"Register"})]})}}]),s}(a.a.Component),g=function(t){return{type:"VIEWPOST",payload:t}},x=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:""},t.signin=function(){0!==t.state.username.length&&0!==t.state.password.length?O.a.post("http://localhost:8080/login",t.state).then((function(e){alert("Success"),console.log(e.data),localStorage.setItem("token",e.data.data.token),t.props.signin(e.data.data.user)})).catch((function(t){alert("Invalid log in credentials.")})):alert("Please enter valid credentials")},t}return Object(i.a)(s,[{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"reg-form-container",children:[Object(d.jsx)("h2",{children:"Sign In"}),Object(d.jsx)("p",{children:"Please fill in this form to sign in."}),Object(d.jsx)("hr",{}),"Username:"," ",Object(d.jsx)("input",{type:"text",value:this.state.username,onChange:function(e){t.setState({username:e.target.value})},name:"usn",id:"usn",required:!0}),Object(d.jsx)("br",{}),"Password:"," ",Object(d.jsx)("input",{type:"password",value:this.state.password,onChange:function(e){t.setState({password:e.target.value})},name:"psw",id:"psw",required:!0}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{className:"signinbtn",onClick:this.signin,children:"Sign In"})]})}}]),s}(a.a.Component),v=Object(h.b)(null,{signin:function(t){return{type:"SIGNIN",payload:t}}})(x),k=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).deleteBtnHandler=function(e){e.stopPropagation(),window.confirm("Are you sure you want to delete this post?")&&(console.log(localStorage.getItem("token")),O.a.delete("http://localhost:8080/posts/".concat(t.props.post._id),{data:{token:localStorage.getItem("token")}}).then((function(e){console.log(e),alert("Post has been succesfully deleted"),document.getElementById(t.props.post._id).remove()})))},t}return Object(i.a)(s,[{key:"render",value:function(){return Object(d.jsx)("button",{onClick:this.deleteBtnHandler,className:"delete-btn",children:"Delete Post"})}}]),s}(a.a.Component),y=Object(h.b)((function(t){return{user:t.user}}))(k),w=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={isClicked:!1},t.clickHandler=function(e){t.props.viewPost(t.props.post),t.setState({isClicked:!0})},t.createDate=function(t){var e=new Date(t),s=e.getMonth(),n=e.getDate();return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s]," ").concat(n)},t}return Object(i.a)(s,[{key:"render",value:function(){return Object(d.jsxs)("li",{className:"minipost-container",onClick:this.clickHandler,id:this.props.post._id,children:[this.state.isClicked?Object(d.jsx)(j.a,{to:"/post"}):null,Object(d.jsxs)("p",{children:["Author: ",Object(d.jsx)("span",{children:this.props.post.user_id.username})]}),Object(d.jsx)("h2",{children:this.props.post.title}),this.createDate(this.props.post.createdAt),Object(d.jsx)("hr",{})]})}}]),s}(a.a.Component),S=Object(h.b)((function(t){return{user:t.user}}),{viewPost:g})(w),C=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={posts:[]},t}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var t=this;O.a.get("http://localhost:8080/posts",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){console.log(e.data),t.setState({posts:e.data.data})}))}},{key:"render",value:function(){return Object(d.jsx)("ol",{className:"posts-container",children:this.state.posts.map((function(t,e){return Object(d.jsx)(S,{post:t},t._id)}))})}}]),s}(a.a.Component),L=Object(h.b)((function(t){return{currentUser:t.user}}))(C),N=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={comment:""},t.commentClickHandler=function(){O.a.post("http://localhost:8080/posts/".concat(t.props.post._id,"/comment"),{user_id:t.props.user._id,content:t.state.comment},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.setState({comment:""}),t.props.updateComments(e.data.data.comments)}))},t}return Object(i.a)(s,[{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"text",value:this.state.comment,onChange:function(e){t.setState({comment:e.target.value})},name:"comment",id:"comment",required:!0}),Object(d.jsx)("button",{className:"commentbtn",onClick:this.commentClickHandler,children:"Comment"})]})}}]),s}(a.a.Component),_=Object(h.b)((function(t){return{post:t.postToView,user:t.user}}),{updateComments:function(t){return{type:"UPDATECOMMENTS",payload:t}}})(N),P=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={isLiked:!1,numLikes:t.props.comment.likes.length},t.checkIfLiked=function(t,e){return 0!==t.filter((function(t){return t._id._id===e})).length},t.toggleLike=function(){O.a.patch("http://localhost:8080/posts/".concat(t.props.post_id,"/comment/").concat(t.props.comment._id),{user_id:t.props.user._id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){!1===t.state.isLiked?t.setState({isLiked:!t.state.isLiked,numLikes:t.state.numLikes+1}):t.setState({isLiked:!t.state.isLiked,numLikes:t.state.numLikes-1})})).catch((function(t){console.log(t)}))},t}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var t=this.checkIfLiked(this.props.comment.likes,this.props.user._id);this.setState({isLiked:t})}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"comment-container",children:[console.log(this.props.comment),Object(d.jsx)("p",{className:"comment-content",children:this.props.comment.content}),Object(d.jsxs)("p",{className:"comment-author",children:["Submitted by: ",this.props.comment.user.username]}),Object(d.jsxs)("p",{className:"comment-likes",children:[Object(d.jsx)("i",{onClick:this.toggleLike,className:"fa fa-thumbs-up thumbs-up-icon",style:this.state.isLiked?{color:"blue"}:{color:"gray"}})," ",this.state.numLikes," people like this comment"]})]})}}]),s}(a.a.Component),I=Object(h.b)((function(t){return{user:t.user}}))(P),A=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={isLiked:!1,numLikes:t.props.post.likes.length},t.checkIfLiked=function(t,e){return 0!==t.filter((function(t){return t._id._id===e})).length},t.toggleLike=function(){O.a.patch("http://localhost:8080/posts/".concat(t.props.post._id),{user_id:t.props.user._id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){!1===t.state.isLiked?t.setState({isLiked:!t.state.isLiked,numLikes:t.state.numLikes+1}):t.setState({isLiked:!t.state.isLiked,numLikes:t.state.numLikes-1})})).catch((function(t){console.log(t)}))},t}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var t=this.checkIfLiked(this.props.post.likes,this.props.user._id);this.setState({isLiked:t})}},{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("article",{className:"post-container",children:[Object(d.jsx)("h2",{className:"post-title",children:this.props.post.title}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"post-content",children:this.props.post.content}),Object(d.jsxs)("p",{className:"post-author",children:["Author: ",Object(d.jsx)("span",{children:this.props.post.user_id.username})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{onClick:this.toggleLike,className:"fa fa-thumbs-up thumbs-up-icon",style:this.state.isLiked?{color:"blue"}:{color:"gray"}})," ",this.state.numLikes," people like this post"]})]}),Object(d.jsxs)("section",{className:"post-comments-container",children:[Object(d.jsx)(_,{}),Object(d.jsxs)("div",{className:"comments-container",children:[Object(d.jsx)("h2",{className:"comment-container-header",children:"Comments"}),this.props.post.comments.map((function(e,s){return Object(d.jsx)(I,{comment:e,index:s,post_id:t.props.post._id},e._id)}))]})]})]})}}]),s}(a.a.Component),T=Object(h.b)((function(t){return{post:t.postToView,user:t.user}}))(A),D=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={content:"",user_id:t.props.user._id,title:""},t.contentChangeHandler=function(e){t.setState({content:e.target.value})},t.submit=function(){O.a.post("http://localhost:8080/posts",t.state,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.setState({content:"",title:""}),alert("Post submitted successfully!")}))},t}return Object(i.a)(s,[{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"create-post-textarea-container",children:[Object(d.jsx)("h2",{children:"Submit a Blog Post"}),Object(d.jsx)("p",{children:"Please write your blog post in the text area below."}),Object(d.jsx)("hr",{}),"Title:"," ",Object(d.jsx)("input",{type:"text",value:this.state.title,onChange:function(e){t.setState({title:e.target.value})},name:"title",id:"title",required:!0}),Object(d.jsx)("br",{}),"Content:"," ",Object(d.jsx)("textarea",{autoFocus:!0,id:"form-blog-content",rows:"20",value:this.state.content,onChange:this.contentChangeHandler}),Object(d.jsx)("button",{className:"create-post-btn",onClick:this.submit,children:"Submit"})]})}}]),s}(a.a.Component),M=Object(h.b)((function(t){return{user:t.user}}))(D),V=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={isClicked:!1},t.clickHandler=function(e){t.props.post.user_id={_id:t.props.post.user_id,username:t.props.user.username},t.props.viewPost(t.props.post),t.setState({isClicked:!0})},t.createDate=function(t){var e=new Date(t),s=e.getMonth(),n=e.getDate();return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s]," ").concat(n)},t}return Object(i.a)(s,[{key:"render",value:function(){return Object(d.jsxs)("li",{className:"minipost-container",onClick:this.clickHandler,id:this.props.post._id,children:[console.log(this.props.post),console.log(this.props.user),this.state.isClicked?Object(d.jsx)(j.a,{to:"/post"}):null,Object(d.jsx)("h2",{children:this.props.post.title}),this.createDate(this.props.post.createdAt),Object(d.jsx)("hr",{}),this.props.post.user_id===this.props.user._id?Object(d.jsx)(y,{post:this.props.post}):null]})}}]),s}(a.a.Component),B=Object(h.b)((function(t){return{user:t.user}}),{viewPost:g})(V),E=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){var t;Object(c.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={posts:[]},t}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var t=this;O.a.get("http://127.0.0.1:8080/user/".concat(this.props.user._id,"/posts"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){console.log(e.data),t.setState({posts:e.data.data})}))}},{key:"render",value:function(){return Object(d.jsx)("ol",{className:"posts-container",children:this.state.posts.map((function(t,e){return Object(d.jsx)(B,{post:t},t._id)}))})}}]),s}(a.a.Component),H=Object(h.b)((function(t){return{user:t.user}}))(E),J=function(t){Object(l.a)(s,t);var e=Object(u.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"main-container-react",children:[Object(d.jsxs)("nav",{className:"navbar",children:[Object(d.jsx)("h1",{id:"site-name",children:"Medium++"}),Object(d.jsx)("div",{className:"navbar-links",children:this.props.user?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.b,{to:"/posts",children:"View posts"}),Object(d.jsx)(p.b,{to:"/user/posts",children:"My posts"}),Object(d.jsx)(p.b,{to:"/posts/create",children:"Create post"}),Object(d.jsx)("button",{onClick:this.props.logout,id:"logout",children:"Logout"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.b,{to:"/register",children:"Get Started"}),Object(d.jsx)(p.b,{to:"/signin",children:"Sign In"})]})})]}),Object(d.jsx)(j.b,{exact:!0,path:"/",children:Object(d.jsx)(j.a,{to:"/welcome"})}),Object(d.jsxs)(j.b,{exact:!0,path:"/welcome",children:[this.props.user&&Object(d.jsx)(j.a,{to:"/posts"}),Object(d.jsx)(b,{})]}),Object(d.jsxs)(j.b,{exact:!0,path:"/register",children:[this.props.user&&Object(d.jsx)(j.a,{to:"/posts"}),Object(d.jsx)(f,{})]}),Object(d.jsxs)(j.b,{exact:!0,path:"/signin",children:[this.props.user&&Object(d.jsx)(j.a,{to:"/posts"}),Object(d.jsx)(v,{})]}),Object(d.jsxs)(j.b,{exact:!0,path:"/posts",children:[!this.props.user&&Object(d.jsx)(j.a,{to:"/welcome"}),Object(d.jsx)(L,{})]}),Object(d.jsxs)(j.b,{exact:!0,path:"/post",children:[null===this.props.postToView?Object(d.jsx)(j.a,{to:"/posts"}):Object(d.jsx)(T,{}),!this.props.user&&Object(d.jsx)(j.a,{to:"/welcome"})]}),Object(d.jsxs)(j.b,{exact:!0,path:"/posts/create",children:[!this.props.user&&Object(d.jsx)(j.a,{to:"/welcome"}),Object(d.jsx)(M,{})]}),Object(d.jsxs)(j.b,{exact:!0,path:"/user/posts",children:[!this.props.user&&Object(d.jsx)(j.a,{to:"/welcome"}),Object(d.jsx)(H,{})]})]})}}]),s}(a.a.Component),F=Object(h.b)((function(t){return{postToView:t.postToView,user:t.user}}),{logout:function(){return{type:"LOGOUT"}}})(J),q=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,65)).then((function(e){var s=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;s(t),n(t),a(t),r(t),o(t)}))},G=s(33),U=s(16),z={user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,postToView:null},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SIGNIN":return localStorage.setItem("user",JSON.stringify(e.payload)),Object(U.a)(Object(U.a)({},t),{},{user:e.payload});case"LOGOUT":return localStorage.removeItem("user"),Object(U.a)(Object(U.a)({},t),{},{user:null});case"VIEWPOST":return Object(U.a)(Object(U.a)({},t),{},{postToView:e.payload});case"UPDATECOMMENTS":var s=Object(U.a)({},t.postToView),n=e.payload[e.payload.length-1],a={content:n.content,likes:n.likes,_id:n._id,user:{username:t.user.username}};return s.comments.push(a),Object(U.a)(Object(U.a)({},t),{},{postToView:s});case"LOGOUT":return window.localStorage.clear(),Object(U.a)(Object(U.a)({},t),{},{user:null,postToView:null});default:return t}};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(h.a,{store:Object(G.a)(W),children:Object(d.jsx)(p.a,{children:Object(d.jsx)(F,{})})})}),document.getElementById("root")),q()}},[[64,1,2]]]);
//# sourceMappingURL=main.d693288f.chunk.js.map